'use strict';var NUMBER_SUFFIX_ARR=[],NUMBER_PREFIX_ARR={cny:{up:{prefix:'\xA5'},stable:{prefix:'\xA5'},down:{prefix:'\xA5'}},usd:{up:{prefix:'$'},stable:{prefix:'$'},down:{prefix:'$'}}},NUMBER_GENERAL_VALUE=[1000,1,0.1,0.01],GENERAL_DECIMAL_LENGTH=[],NUMBER_GENERAL_FUNC=[];NUMBER_GENERAL_FUNC.push(function(a){return parseInt(a.toFixed())}),NUMBER_GENERAL_FUNC.push(function(a){return parseFloat(a.toFixed(2))}),NUMBER_GENERAL_FUNC.push(function(a){return parseFloat(a.toFixed(4))}),NUMBER_GENERAL_FUNC.push(function(a){return parseFloat(a.toFixed(6))}),NUMBER_GENERAL_FUNC.push(function(a){return parseFloat(a.toFixed(8))});var NUMBER_DIGITAL_VALUE=[100,0.1,0.01],DIGITAL_DECIMAL_LENGTH=[2,4,6,8],NUMBER_DIGITAL_FUNC=[];NUMBER_DIGITAL_FUNC.push(function(a){return parseFloat(a.toFixedWithoutUp(2))}),NUMBER_DIGITAL_FUNC.push(function(a){return parseFloat(a.toFixedWithoutUp(4))}),NUMBER_DIGITAL_FUNC.push(function(a){return parseFloat(a.toFixedWithoutUp(6))}),NUMBER_DIGITAL_FUNC.push(function(a){return parseFloat(a.toFixedWithoutUp(8))});var NUMBER_PROPERTY_VALUE=[],PROPERTY_DECIMAL_LENGTH=[8],NUMBER_PROPERTY_FUNC=[];NUMBER_PROPERTY_FUNC.push(function(a){return parseFloat(a.toFixedWithoutUp(8))});var NUMBER_LEGAL_VALUE=[],LEGAL_DECIMAL_LENGTH=[2],NUMBER_LEGAL_FUNC=[];NUMBER_LEGAL_FUNC.push(function(a){return parseFloat(a.toFixedWithoutUp(2))});var config={format:{numberFormat:{general:{numberValue:NUMBER_GENERAL_VALUE,numberFunc:NUMBER_GENERAL_FUNC,decimalLength:GENERAL_DECIMAL_LENGTH},digital:{numberValue:NUMBER_DIGITAL_VALUE,numberFunc:NUMBER_DIGITAL_FUNC,decimalLength:DIGITAL_DECIMAL_LENGTH},property:{numberValue:NUMBER_PROPERTY_VALUE,numberFunc:NUMBER_PROPERTY_FUNC,decimalLength:PROPERTY_DECIMAL_LENGTH},legal:{numberValue:NUMBER_LEGAL_VALUE,numberFunc:NUMBER_LEGAL_FUNC,decimalLength:LEGAL_DECIMAL_LENGTH}},numberSuffixArr:NUMBER_SUFFIX_ARR,numberPrefixArr:NUMBER_PREFIX_ARR}};Number.prototype.toFixedWithoutUp=function(a){a=a||0;var b=this.toFixed(a+1);return+b.substring(0,b.toString().length-1)},Number.prototype.formatFixStyle=function(a){var b=Math.abs(this),c=0>this?'-':'',d=config.format.numberPrefixArr,e=config.format.numberValue,f=config.format.numberSuffixArr,g=a&&(a.prefix||a.name&&d[a.name]&&d[a.name][a.type||'stable'].prefix)||'',h=a&&(a.suffix||a.name&&d[a.name]&&d[a.name][a.type||'stable'].suffix)||'',k=a.decimalLength||-1,l=a.decimalSign||'.',m='boolean'!=typeof a.thousandSign&&(a.thousandSign||',')||'',n=1e-6<b||0===b?b.toString().split('.'):b.toFixed(8).split('.'),o='',p=n[1],q=n[0],r=3<q.length?q.length%3:0;return p&&p.length<k&&Array(k-p.length).fill(0).forEach(function(s){return p+=s}),f.forEach(function(s){return b>=s.value&&(o=s.suffix)}),h+=o,g+c+(r?q.substr(0,r)+m:'')+q.substr(r).replace(/(\d{3})(?=\d)/g,'$1'+m)+(1<n.length?l+p:'')+h},String.prototype.addZero=function(a){var b=this.split('.'),c=b[1]||'';return c.length<a&&!Array(a-c.length).fill(0).forEach(function(d){return c+=d})&&b[0]+'.'+c||this};function findFlag(a,b){for(var c=config.format.numberFormat[b].numberValue,d=c.length,e=0;e<c.length;e++)if(a>=c[e]){d=e;break}return d}Number.prototype.formatFixNumber=function(a){if(0===Math.abs(this))return this;a=a||'general';var b=0<this?1:-1,c=Math.abs(this),d=config.format.numberFormat[a].numberFunc;if(0===d.length)return b*c;var e=findFlag(c,a);return b*d[e](c)},Number.prototype.formatFixNumberForAmount=function(a){return 100>a?(''+this.toFixedWithoutUp(4).formatFixStyle({})).addZero(4):(''+this.toFixedWithoutUp(6).formatFixStyle({})).addZero(6)},Number.prototype.format=function(a){var b=a&&a.number||'general',c=a&&a.style||{},d=config.format.numberFormat[b].decimalLength,e=this.formatFixNumber(b),g=e.formatFixStyle(Object.assign(c,('digital'===b||'legal'===b)&&{thousandSign:!1}||{})),h=findFlag(Math.abs(e),b);return d[h]&&(g=g.addZero(d[h])),g},Number.prototype.toPercent=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return a&&0===this?this.toFixed(2):a&&0<this?'+'+this.toFixed(2)+'%':this.toFixed(2)+'%'},Number.prototype.toDate=function(a){var b=new Date(1e3*this);return b.dateHandle(a)},Date.prototype.dateHandle=function(a){a=a||'yyyy-MM-dd HH:mm:ss';var b={y:this.getFullYear(),M:this.getMonth()+1,d:this.getDate(),w:this.getDay(),H:this.getHours(),h:0==this.getHours()%12?12:this.getHours()%12,m:this.getMinutes(),s:this.getSeconds(),S:this.getMilliseconds()},c=['\u65E5','\u4E00','\u4E8C','\u4E09','\u56DB','\u4E94','\u516D'],_loop=function(d){a=a.replace(new RegExp(d+'+','g'),function(e){var f=b[d]+'';if('w'===d)return(2<e.length?'\u661F\u671F':'\u5468')+c[f];for(var g=0,h=f.length;g<e.length-h;g++)f='0'+f;return 1===e.length?f:f.substring(f.length-e.length)})};for(var d in b)_loop(d);return a};
